---
layout: post
title: 'Apache OFBiz News - August 2018 '
date: '2019-01-14T10:20:36+00:00'
permalink: apache-ofbiz-news-august-2018
---
<h2>Apache OFBiz News August 2018</h2>Welcome to our regular monthly round-up of OFBiz news. This month we have more news about a new impersonate feature that has been implemented for OFBiz as well as our usual list of features and improvements.
  
  
  <h2>Impersonate Feature</h2> 
  <p>One of our contributors Gil Portenseigne has proposed a new feature for OFBiz. It is called the Impersonate feature. So what does it do? And how does it work?</p> 
  <p>Imagine that someone has reported something to you such as strange OFBiz behavior and you want to help them by validating it but don't want to ask for their login details. They can instead give you permission to impersonate them in the system. This impersonation feature can be very useful when you need to validate some behavior or to assist a user in production without asking for their credentials. This type of functionality is a common feature that can help people in support roles and is a common feature that can be found for example in Gitlab.</p> 
  <p>This feature has been developed by one of our OFBiz service providers and has been contributed back to the OFBiz community and project.</p> 
  <p><em><strong>&quot;This feature became so easy to use that even in preproduction or integration environments we use it daily to impersonate <g class="gr_ gr_155 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="155" data-gr-id="155">specific</g> configured <g class="gr_ gr_149 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="149" data-gr-id="149">userlogin</g> without trying to remember the password... It's implemented in a very basic way;&nbsp; <g class="gr_ gr_151 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-del replaceWithoutSep" id="151" data-gr-id="151">a new</g> permission is created and can be granted to an authorized user, that will be offered a way to select a <g class="gr_ gr_153 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="153" data-gr-id="153">userlogin</g> to impersonate.&quot;</strong></em> <br /></p> 
  <p>If you would like try the new impersonate feature then it is available here:&nbsp;<a href="https://issues.apache.org/jira/browse/OFBIZ-10515" rel="noreferrer" target="_blank">OFBIZ-10515</a></p> 
  <p>Thanks very much to Gil Portenseigne for contributing this feature to OFBiz.</p> 
  <p> </p> 
  <h2>Inventory Allocation Planning</h2> 
  <p>Also during this month, the community discussed a proposal to provide a feature to allocate available inventory and any future supply in a more practical way amongst existing customers orders by considering different factors like estimated delivery dates, order priority, customer preference etc.</p> 
  <p>Currently in OFBiz, as part of the inventory reservation flow, inventory gets reserved for an order&nbsp;based on the reservation algorithm that is specified e.g. First in First Out (FIFO,) Last in First Out (LIFO)&nbsp; etc. Sometimes,&nbsp;the fulfillment cycle of the order takes too long, or due to some unexpected circumstances, the order holds the inventory allocation for a long time. In such scenarios, inventory availability becomes one of the major bottlenecks in fulfilling the other sales orders and businesses often are short supplied against their actual demand.</p> 
  <p>This modification will help resolve this issue. You can find out more details about this proposal, including design notes and current progress in Jira <a href="https://issues.apache.org/jira/browse/OFBIZ-10518" rel="noreferrer" target="_blank">OFBIZ-10518</a></p> 
  <p>A big thank you to Deepak Nigam for the proposal and to everyone who contributed ideas and feedback.</p> 
  <p> </p> 
  <h2>New features and improvements</h2>Functional enhancements and improvements as well as updates of third-party libraries and source code refactoring:
  
  
  <h3>Framework</h3> 
  <ul> 
    <li><g class="gr_ gr_144 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del" id="144" data-gr-id="144">Factorizes</g> and refactors filtering of duplicated &quot;use-when&quot; fields in &quot;FormRenderer&quot; (<a href="https://issues.apache.org/jira/browse/OFBIZ-10502">OFBIZ-10502</a>).</li> 
    <li>Refactors <tt>FormRenderer::getFieldListsByPosition</tt> (<a href="https://issues.apache.org/jira/browse/OFBIZ-10503">OFBIZ-10503</a>).</li> 
    <li><g class="gr_ gr_150 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="150" data-gr-id="150">Refactores</g> the MapContext object with multiple improvements (<a href="https://issues.apache.org/jira/browse/OFBIZ-10485">OFBIZ-10485</a>). Removes the constructor and factory method &quot;<g class="gr_ gr_154 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="154" data-gr-id="154">getMapContext</g>&quot; as it is redundant and does not add any value - Replaces manual for-loop for collection walking in multiple methods with simple stream calls applied declaratively with less noise in the code. - Fully removed the ListSet custom data structure with as that data structure did not serve any meaningful purpose and it is always better to rely on the java builtin data structures where possible. Construction was replaced with a HashSet instead.</li> 
    <li>Uses the stream API in FormRenderer (<a href="https://issues.apache.org/jira/browse/OFBIZ-10505">OFBIZ-10505</a>).</li> 
    <li><g class="gr_ gr_158 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="158" data-gr-id="158">Refactos</g> MapContext and MapStack further (<a href="https://issues.apache.org/jira/browse/OFBIZ-10485">OFBIZ-10485</a>). Renames <g class="gr_ gr_160 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="160" data-gr-id="160">stackList</g> to contexts (the data structure holding the context Deque<g class="gr_ gr_166 gr-alert gr_gramm gr_inline_cards gr_run_anim Style multiReplace" id="166" data-gr-id="166">) .</g> Refactors the size function to utilize streams to sum all keys. Implements a function &quot;entryStream()&quot; that returns a stream of all keys in the correct sequential order and utilizes this function in multiple functions for iterating over the keys including &quot;containsValue&quot;, &quot;values&quot; and &quot;entrySet&quot;. Re-designs the get functions of the context map to use a generic function with a functional interface &quot;withMapContainingKey&quot;.</li> 
    <li>Removes all unnecessary boxing and unboxing in Java classes (<a href="https://issues.apache.org/jira/browse/OFBIZ-10504">OFBIZ-10504</a>).</li> 
    <li>Adds the missing ASL2 license.</li> 
    <li>Disables DTDs for XML-RPC requests (<a href="https://issues.apache.org/jira/browse/OFBIZ-10509">OFBIZ-10509</a>). Disables any doctype declarations in XML-RPC requests to OFBiz to enhance performance and security.</li> 
    <li>Renders different HTML container types with ScreenRenderer (<a href="https://issues.apache.org/jira/browse/OFBIZ-10495">OFBIZ-10495</a>).</li> 
    <li>Replaces #assign with #local in all the <g class="gr_ gr_122 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="122" data-gr-id="122">ftl</g> macros (<a href="https://issues.apache.org/jira/browse/OFBIZ-10516">OFBIZ-10516</a>).</li> 
    <li>Uses input type=submit for form submission (<a href="https://issues.apache.org/jira/browse/OFBIZ-10482">OFBIZ-10482</a>).</li> 
    <li>Changes font Title to match with the initial implementation (<a href="https://issues.apache.org/jira/browse/OFBIZ-10513">OFBIZ-10513</a>).</li> 
    <li>Enhances <g class="gr_ gr_131 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins replaceWithoutSep" id="131" data-gr-id="131">Main</g> menu (<a href="https://issues.apache.org/jira/browse/OFBIZ-10521">OFBIZ-10521</a>).</li> 
    <li>Introduces a new favicon (<a href="https://issues.apache.org/jira/browse/OFBIZ-10522">OFBIZ-10522</a>).</li> 
    <li>Removes org.apache.tomcat.util.net.secure_protocol_version from <g class="gr_ gr_138 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="138" data-gr-id="138">json</g> output (<a href="https://issues.apache.org/jira/browse/OFBIZ-10443">OFBIZ-10443</a>) and ads it to <g class="gr_ gr_142 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="142" data-gr-id="142">ignoreAttrs</g>.</li> 
    <li>Adds method attribute to request-map to ensure that a <g class="gr_ gr_134 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="134" data-gr-id="134">uri</g> can be called GET or POST only (<a href="https://issues.apache.org/jira/browse/OFBIZ-10438">OFBIZ-10438</a>).</li> 
    <li>Removes checks to store only 250 characters of URL in VisitHandler.getVisit() &amp; ServerHitBin.saveHit() (<a href="https://issues.apache.org/jira/browse/OFBIZ-10508">OFBIZ-10508</a>).</li> 
    <li>Adds support to calculate deposit price as well while creating <g class="gr_ gr_130 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins replaceWithoutSep" id="130" data-gr-id="130">shopping</g> cart item (<a href="https://issues.apache.org/jira/browse/OFBIZ-7482">OFBIZ-7482</a>).</li> 
    <li>Refactors ContactMechWorker.get[Entity]ContactMechValueMaps function to improve processing speed (<a href="https://issues.apache.org/jira/browse/OFBIZ-10514">OFBIZ-10514</a>).</li> 
    <li>Improves NL labels in OrderUiLabels.xml (<a href="https://issues.apache.org/jira/browse/OFBIZ-10543">OFBIZ-10543</a>).</li> 
    <li>Removes extra unused code to set the fromDate to avoid duplicate PK in case of <g class="gr_ gr_136 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="136" data-gr-id="136">mysql</g>. As <g class="gr_ gr_143 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="143" data-gr-id="143">mysql</g> added support to store Fractional Seconds in Time Values, this has been fixed under (<a href="https://issues.apache.org/jira/browse/OFBIZ-9337">OFBIZ-9337</a>).</li> 
    <li>Removes comment from ServerHitBin.java related to <g class="gr_ gr_137 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="137" data-gr-id="137">mysql</g> Fractional Seconds related issue, this issue fixed under (<a href="https://issues.apache.org/jira/browse/OFBIZ-9337">OFBIZ-9337</a>).</li> 
  </ul> 
  <h2>Bugfixes</h2>Functional and technical bugfixes:
  
  
  <h3>Framework</h3> 
  <ul> 
    <li>File transfer management with <g class="gr_ gr_135 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="135" data-gr-id="135">communicationEvent</g> and new contactMech FTP_ADDRESS (<a href="https://issues.apache.org/jira/browse/OFBIZ-10245">OFBIZ-10245</a>)</li> 
    <li><g class="gr_ gr_133 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="133" data-gr-id="133">Initial</g> set of <g class="gr_ gr_139 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="139" data-gr-id="139"><g class="gr_ gr_141 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="141" data-gr-id="141">hasLoggedOut</g></g> flag when logging in (<a href="https://issues.apache.org/jira/browse/OFBIZ-10506">OFBIZ-10506</a>).</li> 
    <li>Use of layered-modal with parameter does not work (<a href="https://issues.apache.org/jira/browse/OFBIZ-10511">OFBIZ-10511</a>).</li> 
    <li>Update Apache Tomcat to 9.0.10 because of CVE-2018-8037 (<a href="https://issues.apache.org/jira/browse/OFBIZ-10517">OFBIZ-10517</a>). If an async request was completed by the application at the same time as the container triggered the async timeout, a race condition existed that could result in a user seeing a response intended for a different user. An additional issue was present in the NIO and NIO2 connectors that did not correctly track the closure of the connection when an async request was completed by the application and timed out by the container at the same time.</li> 
    <li>Code duplication in main rainbowstone less file.</li> 
    <li>Build scripts for plugins are not executing.</li> 
    <li>New Payment Group <g class="gr_ gr_129 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del" id="129" data-gr-id="129">can not</g> be created (<a href="https://issues.apache.org/jira/browse/OFBIZ-10523">OFBIZ-10523</a>).</li> 
    <li>Fix Default or Empty Catch block in Java and Groovy files (<a href="https://issues.apache.org/jira/browse/OFBIZ-8341">OFBIZ-8341</a>).</li> 
    <li>Escape null pointer exception on ShipmentWorker.calcPackageWeight when a product <g class="gr_ gr_125 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="125" data-gr-id="125">haven't</g> a <g class="gr_ gr_123 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="123" data-gr-id="123">productWeight</g> value.</li> 
    <li>Add method attribute to request-map to <g class="gr_ gr_126 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="126" data-gr-id="126">controll</g> a <g class="gr_ gr_128 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="128" data-gr-id="128">uri</g> can be called GET or POST only (<a href="https://issues.apache.org/jira/browse/OFBIZ-10438">OFBIZ-10438</a>).</li> 
  </ul> 
  <h3>Plugins</h3> 
  <ul> 
    <li>Not able to select Virtual Product in <g class="gr_ gr_121 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="121" data-gr-id="121">WebPos</g> (<a href="https://issues.apache.org/jira/browse/OFBIZ-7719">OFBIZ-7719</a>).</li> 
    <li>Party Search doesn't consider Billing Address and Shipping Address checkbox in <g class="gr_ gr_124 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="124" data-gr-id="124">WebPos</g> (<a href="https://issues.apache.org/jira/browse/OFBIZ-7709">OFBIZ-7709</a>).</li> 
    <li>Could not find simple-method createWorkEffortSkillStandard as it was called <g class="gr_ gr_140 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="140" data-gr-id="140">as <g class="gr_ gr_132 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="132" data-gr-id="132">simple</g></g> method and it is converted to entity-auto service (<a href="https://issues.apache.org/jira/browse/OFBIZ-10524">OFBIZ-10524</a>).</li> 
    <li>Search in <g class="gr_ gr_120 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="120" data-gr-id="120">Ecommerce</g> no longer works (<a href="https://issues.apache.org/jira/browse/OFBIZ-10531">OFBIZ-10531</a>).</li> 
    <li>Java object rendering on billing section of <g class="gr_ gr_127 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="127" data-gr-id="127">one page</g> anonymous checkout process (<a href="https://issues.apache.org/jira/browse/OFBIZ-10425">OFBIZ-10425</a>).</li> 
  </ul>
